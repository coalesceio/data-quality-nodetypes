fileVersion: 1
id: "448"
isDisabled: false
metadata:
  defaultStorageLocation: null
  error: null
  nodeMetadataSpec: |-
    capitalized: Advance Deploy DMFS
    short: DMFS
    tagColor: gray
    plural: New Types
    deployStrategy: advanced

    config:

    - groupName: Scheduling Options
      items:
     
        # Way to schedule the task to run #
     
      - displayName: Schedule Options
        attributeName: schedulePeriodOption
        type: dropdownSelector
        default: Minutes
        options:
          - Minutes
          - CRON
          - TRIGGER_ON_CHANGES
        isRequired: true
     
      - displayName: Enter task schedule using minutes
        attributeName: schedulePeriod
        type: textBox
        default: '60'
        isRequired: false
        enableIf: "{% if config.schedulePeriodOption == 'Minutes' %} true {% else %} false {% endif %}"
     
      - displayName: Enter task schedule using CRON
        attributeName: scheduleCRON
        type: textBox
        placeholder: '5 0-23 * * * America/Los_Angeles'
        isRequired: false
        enableIf: "{% if config.schedulePeriodOption == 'CRON' %} true {% else %} false {% endif %}"

    - groupName: Universal DMFs
      items:

        # packageConfiguration - Edit package configuration to set default values #

      - type: toggleButton
        attributeName: universalDmfs
        displayName: 'Enable Universal DMFs'
        default: true
        isRequired: false

      - type: toggleButton
        attributeName: universalObjectDmfs
        displayName: 'Enable Universal Object Level DMFs'
        default: true
        isRequired: false
        enableIf: "{% if config.universalDmfs %} true {% else %} false {% endif %}"

      - displayName: Object Level DMFs List
        attributeName: universalObjectDmfsList
        type: textBox
        default: "{{ packageConfiguration.universalObjectDmfs }}"
        isRequired: false
        enableIf: "{% if config.universalObjectDmfs and config.universalDmfs %} true {% else %} false {% endif %}"

      - type: toggleButton
        attributeName: universalColumnDmfs
        displayName: 'Enable Universal Column Level DMFs'
        default: true
        isRequired: false
        enableIf: "{% if config.universalDmfs %} true {% else %} false {% endif %}"

        # Apply Null Count DMF to selected columns #

      - type: toggleButton
        attributeName: universalColumnNullCountDMF
        displayName: 'Apply Null Count DMF'
        default: true
        isRequired: false
        enableIf: "{% if config.universalDmfs and config.universalColumnDmfs %} true {% else %} false {% endif %}"

      - type: columnSelector
        displayName: Choose columns for Null Count DMF
        attributeName: universalColumnNullCountDMFList
        isRequired: false
        enableIf: "{% if config.universalDmfs
                        and config.universalColumnDmfs
                        and config.universalColumnNullCountDMF %} true {% else %} false {% endif %}"

      - displayName: Choose columns for Null Count DMF
        attributeName: universalColumnNullCountDMFList1
        type: textBox
        default: "{{ packageConfiguration.nullCountUniversalColumns }}"
        isRequired: false
        enableIf: "{% if config.universalDmfs and config.universalColumnDmfs and config.universalColumnNullCountDMF %} true {% else %} false {% endif %}"

        # Apply Null Percent DMF to selected columns #

      - type: toggleButton
        attributeName: universalColumnNullPercentDMF
        displayName: Apply Null Percent DMF
        default: false
        isRequired: false
        enableIf: "{% if config.universalDmfs and config.universalColumnDmfs %} true {% else %} false {% endif %}"

      - type: columnSelector
        displayName: Choose columns for Null Percent DMF
        attributeName: universalColumnNullPercentDMFList
        isRequired: false
        enableIf: "{% if config.universalDmfs and config.universalColumnDmfs and config.universalColumnNullPercentDMF %} true {% else %} false {% endif %}"

      - displayName: Choose columns for Null Percent DMF
        attributeName: universalColumnNullPercentDMFList1
        type: textBox
        default: "{{ packageConfiguration.nullPercentUniversalColumns }}"
        isRequired: false
        enableIf: "{% if config.universalDmfs and config.universalColumnDmfs and config.universalColumnNullPercentDMF %} true {% else %} false {% endif %}"

    - groupName: Object Level DMFs
      items:

      - type: toggleButton
        attributeName: addobjectleveldmfs
        displayName: 'Add Object Level DMFs'
        default: false
        isRequired: true

      - type: tabular
        displayName: 'DMF Functions'
        attributeName: adddmfsobject
        columns:

        - displayName: System DMFs
          attributeName: system_dmfs_object
          type: dropdownSelector
          default: "ROW_COUNT"
          options:
          - "ROW_COUNT"
          isRequired: false
          enableIf: "{% if config.addobjectleveldmfs %} true {% else %} false {% endif %}"

        isRequired: false
        enableIf: "{% if config.addobjectleveldmfs %} true {% else %} false {% endif %}"

    - groupName: Column Level DMFs
      items:

      - type: toggleButton
        attributeName: addcolumnleveldmfs
        displayName: 'Add Column Level DMFs'
        default: false
        isRequired: true

      - type: tabular
        displayName: 'DMF Functions'
        attributeName: adddmfs
        columns:

        - type: columnDropdownSelector
          displayName: Column Name
          attributeName: columnNameExpressions
          isRequired: false
          enableIf: "{% if config.addcolumnleveldmfs %} true {% else %} false {% endif %}"

        - displayName: System DMFs
          attributeName: system_dmfs
          type: dropdownSelector
          default: "NULL_COUNT"
          options:
          - "BLANK_COUNT"
          - "BLANK_PERCENT"
          - "NULL_COUNT"
          - "AVG"
          - "MAX"
          - "MIN"
          - "STDDEV"
          - "DUPLICATE_COUNT"
          - "UNIQUE_COUNT"
          - "FRESHNESS"
          isRequired: false
          enableIf: "{% if config.addcolumnleveldmfs %} true {% else %} false {% endif %}"

        isRequired: false
        enableIf: "{% if config.addcolumnleveldmfs %} true {% else %} false {% endif %}"

    - groupName: Custom Object Level DMFs
      items:

      - type: toggleButton
        attributeName: addCustomObjectLevelDMFs
        displayName: 'Add Object Level DMFs'
        default: false
        isRequired: false

      - type: tabular
        displayName: 'CustomDMF Functions'
        attributeName: customObjectDMFsConfig
        columns:

        - type: textBox
          displayName: Function Name
          attributeName: customObjDMFName
          isRequired: false

        - type: textBox
          displayName: Arguments
          attributeName: customObjDMFArgs
          isRequired: false

        isRequired: false
        enableIf: "{% if config.addCustomObjectLevelDMFs %} true {% else %} false {% endif %}"

      enableIf: 'false'

    - groupName: Custom DMFs
      items:

      - type: toggleButton
        attributeName: addCustomDMFs
        displayName: 'Add Custom DMFs'
        default: false
        isRequired: true

      - type: tabular
        displayName: 'CustomDMF Functions'
        attributeName: customDMFsConfig
        columns:

        - type: textBox
          displayName: Function Name
          attributeName: customDMFName
          isRequired: false

        - type: textBox
          displayName: Arguments
          attributeName: customDMFArgs
          isRequired: false

        isRequired: false
        enableIf: "{% if config.addCustomDMFs %} true {% else %} false {% endif %}"

    - groupName: Alerting Options
      items:
     
      - type: toggleButton
        attributeName: emailAlertToggle
        displayName: 'Enable Email Alert'
        default: false
        isRequired: false

      - type: label
        attributeName: paramLabel
        displayName: "âš  Note: Make sure the following parameters are defined in both the workspace and deployment environment - DMF_ALERT_INTEGRATION, DMF_ALERT_EMAIL, DMF_ALERT_WAREHOUSE, DMF_ALERT_SCHEDULE"
        enableIf: "{%- if config.overrideEmailAlertToggle == false and (parameters == {} or parameters.DMF_ALERT_INTEGRATION == '' or parameters.DMF_ALERT_EMAIL == '' or parameters.DMF_ALERT_WAREHOUSE == '' or parameters.DMF_ALERT_SCHEDULE == '') -%} true {%- else -%} false {%- endif -%}"

      - type: toggleButton
        attributeName: overrideEmailAlertToggle
        displayName: 'Enable Override Email Alert'
        default: false
        isRequired: false
        enableIf: "{% if config.emailAlertToggle %} true {% else %} false {% endif %}"

      - displayName: Notification Integration Name
        attributeName: notfIntegrationName
        type: textBox
        isRequired: false
        enableIf: "{% if config.emailAlertToggle and config.overrideEmailAlertToggle %} true {% else %} false {% endif %}"

      - displayName: Email recipient List(Ex. email1, email2)
        attributeName: emailList
        type: textBox
        isRequired: false
        enableIf: "{% if config.emailAlertToggle and config.overrideEmailAlertToggle %} true {% else %} false {% endif %}"

      - displayName: Alert Check Warehouse Name
        attributeName: alertWarehouse
        type: textBox
        isRequired: false
        enableIf: "{% if config.emailAlertToggle and config.overrideEmailAlertToggle %} true {% else %} false {% endif %}"

      - displayName: Alert Check Frequency
        attributeName: alertFrequency
        type: textBox
        isRequired: false
        enableIf: "{% if config.emailAlertToggle and config.overrideEmailAlertToggle %} true {% else %} false {% endif %}"

      - type: toggleButton
        attributeName: nullCntTrigger
        displayName: 'Trigger on Null Count'
        default: false
        isRequired: false
        enableIf: "{% if config.emailAlertToggle %} true {% else %} false {% endif %}"
name: DMFS
type: NodeType
